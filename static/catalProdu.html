<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FiguraLab</title>
  <link rel="icon" href="img/reno.png" type="image/png" sizes="32x32">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="css/index.css">
</head>

<body>
  <div id="header-placeholder"></div>
  <!-- ----------------------------------contenido------------------------- -->
  <main class="container py-5">
    <h1 class="mb-4">Cat√°logo de Productos</h1>
    <div class="row" id="catalogoContainer"></div>
  </main>
  <div id="footer-placeholder"></div>

  <script>
    fetch('header.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('header-placeholder').innerHTML = data;
      });
    fetch('footer.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('footer-placeholder').innerHTML = data;
      });
  </script>
  <script src="js/productos.js"></script>
  <script>
    function renderCatalog() {
      const container = document.getElementById("catalogoContainer");
      container.innerHTML = "";

      const all = products.getProducts();
      if (all.length === 0) {
        container.innerHTML = `<p class="text-muted">No hay productos disponibles.</p>`;
        return;
      }

      all.forEach(p => {
        const col = document.createElement("div");
        col.className = "col-md-4 mb-4";

        col.innerHTML = `
          <div class="card product-card h-100 shadow-sm">
            <img src="${p.img || 'img/default.png'}" class="card-img-top" alt="${p.name}">
            <div class="card-body">
              <h5 class="card-title">${p.name}</h5>
              <p class="card-text text-muted">Stock: ${p.stock}</p>
              <p class="fw-bold">$${p.price}</p>
              <button class="btn btn-outline-primary w-100">Agregar al carrito</button>
            </div>
          </div>
        `;
        container.appendChild(col);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      renderCatalog();

      // cargar header/footer si existen
      fetch("header.html").then(r => r.text()).then(d => {
        document.getElementById("header-placeholder").innerHTML = d;
      });
      fetch("footer.html").then(r => r.text()).then(d => {
        document.getElementById("footer-placeholder").innerHTML = d;
      });
    });
  </script>
</body>

</html>